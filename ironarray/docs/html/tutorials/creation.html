
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Getting started &#8212; ironArray for Python 1.0.0-beta.1 documentation</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/ironArray_logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Statistical distributions" href="random.html" />
    <link rel="prev" title="Tutorials" href="../tutorials.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <img src="../_static/ironArray.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../intro.html">Introduction</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../install.html">Installation</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../tutorials.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../reference.html">Library Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../config.html">Configuring ironArray</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
          
            
                <li class="active">
                    <a href="">Getting started</a>
                </li>
            
          
            
                <li class="">
                    <a href="random.html">Statistical distributions</a>
                </li>
            
          
            
                <li class="">
                    <a href="views.html">Slicing and Views</a>
                </li>
            
          
            
                <li class="">
                    <a href="matmul.html">Matrix multiplication</a>
                </li>
            
          
            
                <li class="">
                    <a href="reductions.html">Reductions</a>
                </li>
            
          
            
                <li class="">
                    <a href="expressions-memory.html">Expression Evaluation (In-Memory)</a>
                </li>
            
          
            
                <li class="">
                    <a href="expressions-disk.html">Expression Evaluation (On-Disk)</a>
                </li>
            
          
            
                <li class="">
                    <a href="error-handling.html">Error handling</a>
                </li>
            
          
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#Creating-an-array" class="nav-link">Creating an array</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#Properties" class="nav-link">Properties</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#Storage" class="nav-link">Storage</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#More-Properties" class="nav-link">More Properties</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#Configuration" class="nav-link">Configuration</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#Global-configuration" class="nav-link">Global configuration</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#Contextual-Configuration" class="nav-link">Contextual Configuration</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#Conclusion" class="nav-link">Conclusion</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Getting-started">
<h1>Getting started<a class="headerlink" href="#Getting-started" title="Permalink to this headline">¶</a></h1>
<p><em>ironArray</em> for Python is a package that implements a multi-dimensional, compressed data container and an optimized computational engine to manage large arrays.</p>
<p>In this tutorial we will cover creating a simple ironArray array. We will instatiate a simple array, then set properties on the array object. We will also see how to set default properties by changing global and contextual configuration settings.</p>
<div class="section" id="Creating-an-array">
<h2>Creating an array<a class="headerlink" href="#Creating-an-array" title="Permalink to this headline">¶</a></h2>
<p>Let’s start by creating a simple array:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">iarray</span> <span class="k">as</span> <span class="nn">ia</span>

<span class="n">dtshape</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">DTShape</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dtshape</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;IArray (5, 5) np.float64&gt;
</pre></div></div>
</div>
<p>Voilà, the object <code class="docutils literal notranslate"><span class="pre">arr</span></code> contains our first ironArray array.</p>
<p>To create an array, we first have to define its shape and data type, using the <code class="docutils literal notranslate"><span class="pre">DTShape</span></code> dataclass. The array is then instantiated by the <code class="docutils literal notranslate"><span class="pre">linspace</span></code> constructor, where you specify the <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> values. Functions in ironArray are written to map closely to NumPy functions; you can consult the <a class="reference external" href="https://numpy.org/doc/">NumPy documentation</a> for more information on the functions and their parameters.</p>
<p>The ironArray library is designed to operate on floating point numerical data. Consequently, the arrays currently support two data types: <code class="docutils literal notranslate"><span class="pre">double</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
<p>Let’s convert the <code class="docutils literal notranslate"><span class="pre">arr</span></code> object into a NumPy array and inspect the data:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ia</span><span class="o">.</span><span class="n">iarray2numpy</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[-1.        , -0.91666667, -0.83333333, -0.75      , -0.66666667],
       [-0.58333333, -0.5       , -0.41666667, -0.33333333, -0.25      ],
       [-0.16666667, -0.08333333,  0.        ,  0.08333333,  0.16666667],
       [ 0.25      ,  0.33333333,  0.41666667,  0.5       ,  0.58333333],
       [ 0.66666667,  0.75      ,  0.83333333,  0.91666667,  1.        ]])
</pre></div></div>
</div>
<div class="section" id="Properties">
<h3>Properties<a class="headerlink" href="#Properties" title="Permalink to this headline">¶</a></h3>
<p>Besides the shape and data type, we can set more properties on the array. For example, let’s make it persistent:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pers_arr</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dtshape</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">urlpath</span><span class="o">=</span><span class="s2">&quot;myarr.iarr&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash
ls -l myarr.iarr
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
-rw-r--r-- 1 faltet faltet 606 Jan 20 11:02 myarr.iarr
</pre></div></div>
</div>
<p>and then we’ll read the persistent object from disk. We are going to use <code class="docutils literal notranslate"><span class="pre">ia.open()</span></code>instead of <code class="docutils literal notranslate"><span class="pre">ia.load()</span></code> to lazily read in the data as needed (a topic covered in a later turorial):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">arr2</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;myarr.iarr&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr2</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[-1.         -0.91666667 -0.83333333 -0.75       -0.66666667]
 [-0.58333333 -0.5        -0.41666667 -0.33333333 -0.25      ]
 [-0.16666667 -0.08333333  0.          0.08333333  0.16666667]
 [ 0.25        0.33333333  0.41666667  0.5         0.58333333]
 [ 0.66666667  0.75        0.83333333  0.91666667  1.        ]]
</pre></div></div>
</div>
<div class="section" id="Storage">
<h4>Storage<a class="headerlink" href="#Storage" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Storage</span></code> class is used to tune the storage for your arrays. The <code class="docutils literal notranslate"><span class="pre">urlpath</span></code> property is just one of many properties that can be set in a <code class="docutils literal notranslate"><span class="pre">Storage</span></code> object. See the <a class="reference external" href="../reference/autofiles/config/iarray.Storage.html">Storage documentation</a> for more details on how ironArray storage can be optimized to improve performance and decrease array storage size.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">store</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">Storage</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Storage(chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False)
</pre></div></div>
</div>
<p>We can also set multiple properties in a single <code class="docutils literal notranslate"><span class="pre">Storage</span></code> instance. For example, this <code class="docutils literal notranslate"><span class="pre">Storage</span></code> object has properties for the shape of the chunks and the blocks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ia</span><span class="o">.</span><span class="n">Storage</span><span class="p">(</span><span class="n">chunkshape</span><span class="o">=</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="n">blockshape</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>The following example shows how to create a <code class="docutils literal notranslate"><span class="pre">Storage</span></code> object and set its properties, then add it to a larger ironArray array object:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dtshape</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">DTShape</span><span class="p">((</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">7000</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">Storage</span><span class="p">(</span><span class="n">chunkshape</span><span class="o">=</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="n">blockshape</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">urlpath</span><span class="o">=</span><span class="s2">&quot;large_arr.iarr&quot;</span><span class="p">)</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dtshape</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">storage</span><span class="o">=</span><span class="n">storage</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash
ls -lh large_arr.iarr
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
-rw-r--r-- 1 faltet faltet 103M Jan 20 11:02 large_arr.iarr
</pre></div></div>
</div>
<p>We have just created an array containing about 500MB of data. Thanks to integrated compression, the size of the serialized array on disk is only 100MB, about 5 times smaller. In contrast to ordinary chunked and compressed data container libraries that support just a single level of data partitioning (such as HDF5 and Zarr), IronArray allows for two levels: chunks and blocks. As we’ll see later, two levels offer more flexibility and options for tuning performance on modern CPU architectures.</p>
</div>
<div class="section" id="More-Properties">
<h4>More Properties<a class="headerlink" href="#More-Properties" title="Permalink to this headline">¶</a></h4>
<p>You may set many other properties when creating an ironArray array. Here we set some compression properties:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dtshape</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">DTShape</span><span class="p">((</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">7000</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">Storage</span><span class="p">(</span><span class="n">chunkshape</span><span class="o">=</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="n">blockshape</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">urlpath</span><span class="o">=</span><span class="s2">&quot;large_arr2.iarr&quot;</span><span class="p">)</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dtshape</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">storage</span><span class="o">=</span><span class="n">storage</span><span class="p">,</span> <span class="n">clevel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">codec</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">Codecs</span><span class="o">.</span><span class="n">ZSTD</span><span class="p">,</span> <span class="n">fp_mantissa_bits</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-bash notranslate"><div class="highlight"><pre>
<span></span>%%bash
ls -lh large_arr2.iarr
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
-rw-r--r-- 1 faltet faltet 31M Jan 20 11:02 large_arr2.iarr
</pre></div></div>
</div>
<p>As you can see, we created an array that holds 500MB of data, as before. But now the serialized data only occupies 30MB of disk space. We changed the compression codec and mantissa bits properties to shrink the storage size:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">codec=ia.Codecs.ZSTD</span></code>: ZSTD offers better compression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fp_mantissa_bits=30</span></code>: We are setting just 30 significant bits in the mantissa, improving the compression ratio. You can set the <code class="docutils literal notranslate"><span class="pre">fp_mantissa_bits</span></code> to any precision between 1 and 24 bit (float32) or 53 bit (float64); the compression engine will compress the data to fit the specified precision.</p></li>
</ol>
<p>You can see the complete set of supported properties and their defaults by examining an instance of <code class="docutils literal notranslate"><span class="pre">ia.Config</span></code>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cfg</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Config(codec=&lt;Codecs.LZ4: 1&gt;, clevel=5, filters=[&lt;Filters.SHUFFLE: 1&gt;], fp_mantissa_bits=0, use_dict=False, nthreads=28, eval_method=&lt;Eval.AUTO: 1&gt;, seed=1, random_gen=&lt;RandomGen.MERSENNE_TWISTER: 0&gt;, storage=Storage(chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False), chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False)
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="Configuration">
<h3>Configuration<a class="headerlink" href="#Configuration" title="Permalink to this headline">¶</a></h3>
<p>Setting the same compression and storage-related properties every time you create an ironArray array object can become tedious and repetitive, if you are dealing with known datasets with stable characteristics. You have the option to set default properties in either the global configuration or within a context.</p>
<div class="section" id="Global-configuration">
<h4>Global configuration<a class="headerlink" href="#Global-configuration" title="Permalink to this headline">¶</a></h4>
<p>If you will always use the same configuration parameters in your script, it might be a good idea to set default global properties as part of your script initialization:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ia</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span><span class="n">codec</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">Codecs</span><span class="o">.</span><span class="n">ZSTD</span><span class="p">,</span> <span class="n">clevel</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Config(codec=&lt;Codecs.ZSTD: 5&gt;, clevel=1, filters=[&lt;Filters.SHUFFLE: 1&gt;], fp_mantissa_bits=0, use_dict=False, nthreads=28, eval_method=&lt;Eval.AUTO: 1&gt;, seed=1, random_gen=&lt;RandomGen.MERSENNE_TWISTER: 0&gt;, storage=Storage(chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False), chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False)
</pre></div></div>
</div>
<p>You can verify that the new default properties are now set: the default compression codec has changed to ZSTD, and the default compression level has changed to 1.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cfg</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Config(codec=&lt;Codecs.ZSTD: 5&gt;, clevel=1, filters=[&lt;Filters.SHUFFLE: 1&gt;], fp_mantissa_bits=0, use_dict=False, nthreads=28, eval_method=&lt;Eval.AUTO: 1&gt;, seed=1, random_gen=&lt;RandomGen.MERSENNE_TWISTER: 0&gt;, storage=Storage(chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False), chunkshape=None, blockshape=None, urlpath=None, enforce_frame=False, plainbuffer=False)
</pre></div></div>
</div>
<p>These will be the defaults for <em>all</em> the ironArray functions that are called in your script.</p>
</div>
<div class="section" id="Contextual-Configuration">
<h4>Contextual Configuration<a class="headerlink" href="#Contextual-Configuration" title="Permalink to this headline">¶</a></h4>
<p>Sometimes you want different configuration profiles for different kinds of arrays. In this case, you can create <code class="docutils literal notranslate"><span class="pre">ia.config</span></code> objects with custom settings that can be applied to selected arrays. This is an example of <em>contextual configuration</em>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dtshape</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">DTShape</span><span class="p">([</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
<span class="k">with</span> <span class="n">ia</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">clevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">codec</span><span class="o">=</span><span class="n">ia</span><span class="o">.</span><span class="n">Codecs</span><span class="o">.</span><span class="n">LZ4</span><span class="p">)</span> <span class="k">as</span> <span class="n">cfg</span><span class="p">:</span>
    <span class="n">a1</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dtshape</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cfg</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">ia</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">dtshape</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;a1 cratio: </span><span class="si">{</span><span class="n">a1</span><span class="o">.</span><span class="n">cratio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;a2 cratio: </span><span class="si">{</span><span class="n">a2</span><span class="o">.</span><span class="n">cratio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
a1 cratio: 8.781161022342813
a2 cratio: 15.030573209604679
</pre></div></div>
</div>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">a1</span></code> and <code class="docutils literal notranslate"><span class="pre">a2</span></code> have different compression ratios, as they have different compression levels and compression codecs set as default properties on their array configurations. <code class="docutils literal notranslate"><span class="pre">a1</span></code> is using the LZ4 codec with compression level 3, whereas <code class="docutils literal notranslate"><span class="pre">a2</span></code> is using ZSTD and compression level 1, the global defaults that we set in the previous example.</p>
</div>
</div>
<div class="section" id="Conclusion">
<h3>Conclusion<a class="headerlink" href="#Conclusion" title="Permalink to this headline">¶</a></h3>
<p>Now you can create ironArray arrays with specific properties. You can create arbitrarily large arrays either in memory or on disk, and you can tailor arrays to your own needs using ironArray configuration properties. Use the advanced global and contextual configurations to set often-used configuration profiles for your arrays.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../tutorials.html" title="previous page">Tutorials</a>
    <a class='right-next' id="next-link" href="random.html" title="next page">Statistical distributions</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020-2021, ironArray Development Team.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>